<html>

<head>

    <meta charset="UTF-8">
    <title>Indic Transliteration by AI4Bharat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <script type="application/javascript" src="./js/api.js"></script>

<style>
      @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&display=swap');

    @font-face {
      font-family: 'Noto Sans MeeteiMayek';
      src: url('//cdn.jsdelivr.net/gh/virtualvinodh/aksharamukha-notomirror/NotoSansMeeteiMayek-Regular.ttf')
    }

   body {
  align-content: center;
  background-image: url('static/image1.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
}








    .center {
      margin: auto;
      width: 90%;
      border: 0;
    }

.topnav {
    overflow: hidden;
    background-color: #333;
    margin-bottom: 24pt;
    font-family: 'Open Sans', sans-serif;
    border: 5px solid #1c1c1c;
    border-radius: 10px;
}

   .topnav a {
    float: left;
    color: #f2f2f2;
    text-align: center;
    padding: 18px 16px;
    text-decoration: none;
    font-size: 17px;
}

 .topnav i {
    /* float: left; */
    color: #f2f2f2;
    text-align: center;
    padding: 14px 19px;
    text-decoration: none;
    font-size: 17px;
    font-style: normal;
    top: 16px;
    position: relative;
}

    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }

    .topnav a.active {
      background-color: #F25A25;
      color: white;
    }



 @media only screen and (max-width: 600px) {
            .topnav a:not(:first-child) {
                display: none;
            }

            .topnav a.icon {
                float: right;
                display: block;
            }

            .topnav.responsive a {
                float: none;
                display: block;
                text-align: center;
            }

            .topnav.responsive a:not(.icon) {
                display: block;
            }
        }


 @media only screen and (min-width: 720px) {
            .topnav i {
                display: none;
            }

            .topnav.responsive a {
                float: none;
                display: block;
                text-align: center;
            }
        }


#editor{
      position: relative;
    border-radius: 0px 0px 20px 20px;
}

#box {
    padding: 10px;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 80%;
    margin: auto;
    margin-top: 6%;
    gap: 1px;
    background-color: #5858580d;
    border-radius: 10px;
    /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); */
    border: 10px solid #666666;
    margin-bottom: 19px;
}


@media only screen and (max-width: 600px) {
  /* Adjust background properties for smaller screens */
  body {
    background-size: contain;
  }
  #box {
                width: 100%;
            }

            #box {
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
}



    h1 {
        text-align: center;
        font-family: 'Open Sans', sans-serif;
        color: #ff6600;
    }

    span {
        font-weight: bold;
        font-family: 'Open Sans', sans-serif;
    }

    #inputBox,
    #outputBox {
        display: flex;
        flex-direction: column;
        padding: 10px;
    }


#inputText,
#outputText,
#inputLanguage,
#outputLanguage {
  border-radius: 8px;
  border: 1px solid #ccc;
  padding: 12px;
  margin-bottom: 12px;
  font-family: 'Open Sans', sans-serif;
  transition: border-color 0.3s, box-shadow 0.3s;
}

#inputText:focus,
#outputText:focus,
#inputLanguage:focus,
#outputLanguage:focus {
  border-color: #ff6600;
  box-shadow: 0 0 8px rgba(223, 223, 223, 0.6);
}



   #mainBox {
    border-radius: 10px;
    overflow: hidden;
    /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); */
}

    #buttonDiv {
        text-align: center;
        margin: auto;
    }

#transliterateBtn {
  padding: 10px 30px;
  font-weight: 400;
  border-radius: 10px;
  font-size: 16px;
  background-color: #ff6600;
  color: white;
  transition: transform .3s, background-color .3s, box-shadow .3s;
  border: 5px solid #FFF;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

#transliterateBtn:hover {
  cursor: pointer;
 
  background-color: rgb(5, 168, 7); /* Slightly lighter color on hover */
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* Lift the button more on hover */
}

    #transliterateBtn:hover {
        cursor: pointer;
      
    }

  #inputText, #outputText {
    padding: 15px;
    outline: none;
    font-size: 20px;
    border-radius: 5px;
    border: none;
    resize: vertical;
    font-family: 'Open Sans', sans-serif;
    background-color: #ffffff;
    opacity: 0.9;
    position: relative;
}

    #inputLanguage,
    #outputLanguage {
        outline: none;
        background-color: #fbfbfb;
        /* Light orange background */
        font-size: 17px;
        
    }

    #inputLanguage::-webkit-scrollbar,
    #outputLanguage::-webkit-scrollbar {
        width: 10px;
    }

    #inputLanguage::-webkit-scrollbar-track,
    #outputLanguage::-webkit-scrollbar-track {
        background: white;
    }

    #inputLanguage::-webkit-scrollbar-thumb,
    #outputLanguage::-webkit-scrollbar-thumb {
        background: #d9d9d9;
        /* Light gray scrollbar thumb */
    }

    #inputLanguage::-webkit-scrollbar-thumb:hover,
    #outputLanguage::-webkit-scrollbar-thumb:hover {
        background: #d9d9d9;
        /* Light gray scrollbar thumb */
    }

    textarea {
        background-color: #ffebcc;
        /* Light orange background */
        opacity: 0.9;
        position: relative;
    }
</style>
</head>

<body>

    <div class="topnav center">
        <a class="active" href="#">AI4Bharat <b>Xlit</b></a>
        <i class="icon" onclick="toggleMenu()">â˜°</i>
        <a href="https://github.com/AI4Bharat/Indic-Translit-UI/issues" style="float: right;" target="_blank">Contact</a>
        <a href="https://github.com/AI4Bharat/Indic-Translit-UI" style="float: right;" target="_blank">Source Code</a>
        <a href="https://ai4bharat.org/transliteration" style="float: right;" target="_blank">About</a>
        <a href="/" style="float: right;" target="_blank">Online Keyboard</a>
    </div>


    <div id="mainBox">
        <div id="box">
            <div id="inputBox">
                <div style="text-align: center; margin-bottom: 5px; font-size: 17px;">
                    <span>FROM :</span>
                    <select id="inputLanguage">
                    </select>
                </div>
                <textarea id="inputText" cols="30" rows="8" dir="auto" maxlength="512" spellcheck="false"></textarea>
            </div>
            <div id="outputBox">
                <div style="text-align: center; margin-bottom: 5px; font-size: 17px;">
                    <span>TO :</span>
                    <select id="outputLanguage">
                    </select>
                </div>
                <textarea id="outputText" cols="30" rows="8" dir="auto" readonly></textarea>
            </div>
        </div>
        <div id="buttonDiv">
            <button id="transliterateBtn">TRANSLITERATE</button>
        </div>
    </div>

</body>

</html>

<script>
    /* UTILS */

    function storeLanguagesLocally(supportedLanguagesResponse) {
        languageMap = {};
        languageMap["English script"] = "en";
        for (i = 0; i < supportedLanguagesResponse.length; i++) {
            languageMap[supportedLanguagesResponse[i]["DisplayName"]] = supportedLanguagesResponse[i]["Identifier"]
        }
        localStorage.setItem('lang_map', JSON.stringify(languageMap));
        return languageMap;
    }

    function retrieveLanguagesFromLocalStorage() {
        const lang_map = localStorage.getItem('lang_map');
        if (lang_map) {
            return JSON.parse(lang_map);
        } else {
            alert('ERROR: Unable to load list of languages!');
            return null;
        }
    }
</script>
<script>
    function toggleMenu() {
        var x = document.querySelector(".topnav");
        if (x.className === "topnav center") {
            x.className += " responsive";
        } else {
            x.className = "topnav center";
        }
    }

    // Close the menu when a link is clicked (for small screens)
    var links = document.querySelectorAll('.topnav a');
    for (var i = 0; i < links.length; i++) {
        links[i].addEventListener('click', function () {
            var x = document.querySelector(".topnav");
            x.className = "topnav center";
        });
    }
</script>

<script>
    // Global objects
    var $inputLanguage = document.getElementById("inputLanguage");
    var $outputLanguage = document.getElementById("outputLanguage");
    var $inputText = document.getElementById("inputText");
    var $outputText = document.getElementById("outputText");
    $transliterateBtn = document.getElementById("transliterateBtn");

    // Language selection handlers
    getSupportedLanguages().then(response => {
        var languageMap = null;
        // Get list of input langs
        if (response) {
            languageMap = storeLanguagesLocally(response);
        } else {
            languageMap = retrieveLanguagesFromLocalStorage();
        }

        // Set list of input langs
        Object.keys(languageMap).forEach(function (langName) {
            var option = document.createElement("option");
            option.text = langName;
            option.value = languageMap[langName];
            $inputLanguage.appendChild(option);
        });

        // Event-handler to decide allowed output langs based on input lang
        $inputLanguage.addEventListener('change', function () {
            var prevInputLangId = localStorage.getItem('input_lang_id');
            currInputLangId = this.value;
            localStorage.setItem('input_lang_id', currInputLangId);
            if (currInputLangId != "en" && prevInputLangId && prevInputLangId != "en") {
                // Nothing to change if we switch from Indic to Indic
                return;
            }

            $outputLanguage.innerHTML = ""; // Clear already set options
            if (currInputLangId == "en") {
                // Set Indic languages for ouput
                languageMap = retrieveLanguagesFromLocalStorage();
                Object.keys(languageMap).forEach(function (langName) {
                    langCode = languageMap[langName];
                    if (langCode != "en") {
                        var option = document.createElement("option");
                        option.text = langName;
                        option.value = langCode;
                        $outputLanguage.appendChild(option);
                    }
                });

                // Restore previously selected output lang; if not, set default
                var outputLangId = localStorage.getItem('output_lang_id');
                if (!outputLangId || outputLangId == "en") {
                    outputLangId = "hi";
                }
                $outputLanguage.value = outputLangId;
            } else {
                // Allow only roman output
                var option = document.createElement("option");
                option.text = "English script";
                option.value = "en";
                $outputLanguage.appendChild(option);
            }
        });

        // Restore previously selected input lang; if not, set default
        var prevInputLangId = localStorage.getItem('input_lang_id');
        localStorage.removeItem('input_lang_id');
        $inputLanguage.value = prevInputLangId ? prevInputLangId : "en";
        $inputLanguage.dispatchEvent(new Event('change')); // Set output langs initially
    });

    // Handler for transliteration
    $transliterateBtn.addEventListener("click", function () {
        outputLangId = $outputLanguage.value;
        if (outputLangId != "en") {
            localStorage.setItem('output_lang_id', outputLangId);
        }
        getTransliterationForWholeText($inputLanguage.value, outputLangId, $inputText.value)
            .then(transliteratedText => {
                $outputText.value = transliteratedText;
            });
    });
</script>

<!-- Credits: https://akashkmt.github.io/Translator-App/ -->
